:title: Configuring Identity Credential Issuance in Keycloak over OpenID4VCI
:date: 2025-10-21
:publish: true
:author: Rodrick Awambeng, Forkim Enjeckayang, Ingrid Kamga, Bertrand Ogen
:summary: Keycloak implements OpenID for Verifiable Credential Issuance (OpenID4VCI), enabling users to be issued verifiable credentials as a digital proof of their identity. However, several components need to be consistently configured to enable this functionality.

Keycloak implements https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0.html[OpenID for Verifiable Credential Issuance] (OpenID4VCI), enabling users to be issued verifiable credentials as a digital proof of their identity.
However, several components need to be consistently configured to enable this functionality, from realm to client to issuable credential (as client scope).

NOTE: At the time of writing this blog, Keycloak's support for OpenID4VCI is still experimental but expected to be promoted to preview in early 2026.

This blog post builds on a simple scenario to illustrate how to set up Keycloak for OpenID4VCI.
Here is the scenario: The Keycloak OAuth SIG team wants to issue verifiable credentials to its members as a proof of membership in the SIG group.
The membership credential will contain the member's name and email, which can be later presented at an onsite or virtual event for access granting.

== Verifiable Credentials (VCs) and OpenID for Verifiable Credential Issuance (OpenID4VCI)

https://ec.europa.eu/digital-building-blocks/sites/spaces/EBSI/pages/600343491/EBSI+Verifiable+Credentials[Verifiable Credentials] (VCs) are a digital representation of credentials that can be cryptographically verified.
They enable secure and privacy-preserving sharing of information between parties.
VCs are designed to be tamper-evident and can be issued, held, and presented by individuals or entities.
From a conceptual standpoint, Keycloak, as an identity and access management solution, can therefore be set to issue VCs to users as a standalone digital proof of their identity.
Such may also be referred to as Identity Credentials.

--
++++
<div class="paragraph" style="margin-top:2em;margin-bottom:3em;">
    <img src="${blogImages}/openid4vci/triangle-of-trust.png" alt="Triangle of trust or Issuer-Holder-Verifier model" style="border:none;display:block;max-width:100%;height:auto;margin:0 auto;">
    <p style="text-align:center;font-style:italic">Triangle of trust or Issuer-Holder-Verifier model</p>
</div>
++++
--

As part of the family of https://openid.net/wg/digital-credentials-protocols/specifications[OpenID for Verifiable Credentials] (OpenID4VC) specifications, https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0.html[OpenID4VCI] is a protocol that extends the OpenID Connect framework to facilitate the issuance of verifiable credentials.
It provides a standardized way for issuers to issue VCs to holders, allowing for interoperability and secure communication between different systems.
Keycloak implements OpenID4VCI to act as an *Issuer* of verifiable credentials for its user knowledge base.

In general, these credentials are intended to be used in scenarios where trusting parties need to independently verify user identities or attributes associated with a Keycloak authorization server, such as in our scenario where members of the OAuth SIG need to prove their membership status at an event venue.

== Configuring Keycloak for OpenID4VCI

OpenID4VCI in Keycloak is offered via the feature flag `openid4vci`, which consequently needs to be enabled.

[source,bash]
----
---features=openid4vci
----

Beyond enabling the feature flag, the following configuration steps need to be taken consistently, in accordance with your use case:

- Enable OpenID4VCI at the realm level explicitly
- Enable OpenID4VCI at the client level explicitly
- Configure a verifiable credential to be issued in a dedicated client scope
- Attach the client scope to the OpenID4VCI-enabled client

Additional realm attributes can be configured to customize the OpenID4VCI behavior.
Unfortunately, at the time of writing this blog, some of these and other configurations are not yet supported via the Keycloak Admin Console.
For this reason, we will prioritize conveying required configurations via the REST API means.

=== Enabling OpenID4VCI at the realm level

To enable OpenID4VCI at the realm level, navigate to the desired realm in the Keycloak Admin Console, go to the *Realm Settings* section, and select the *OpenID4VCI* tab.
Enable the *OpenID4VCI Support* switch.

== Retrieving a credential offer to start the issuance flow

Once the above configurations are in place, the OpenID4VCI issuance flow can be initiated by retrieving a credential offer from Keycloak at the Credential Offer Endpoint with the OpenID4VCI-enabled client previously configured.
